$cyan: #00ffff;
$cyan-dim: rgba(0, 255, 255, 0.3);
$cyan-glow: rgba(0, 255, 255, 0.15);
$dark-bg: #000a14;
$panel-bg: rgba(0, 20, 40, 0.85);

.api-key-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: $dark-bg;
  padding: 20px;
  position: relative;
  overflow: hidden;
  font-family: 'Courier New', monospace;
}

/* ── HUD BACKGROUND ── */
.hud-bg {
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  .grid-lines {
    position: absolute; inset: 0;
    background-image:
      linear-gradient(rgba(0,255,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,255,255,0.03) 1px, transparent 1px);
    background-size: 60px 60px;
    animation: gridShift 20s linear infinite;
  }
  .scan-line {
    position: absolute; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, $cyan-dim, transparent);
    animation: scanDown 6s linear infinite;
  }
}

.particle {
  position: fixed; width: 3px; height: 3px; border-radius: 50%;
  background: $cyan; opacity: 0; z-index: 0; pointer-events: none;
  animation: particleFloat 8s ease-in-out infinite;
  &.p1 { top: 12%; left: 18%; animation-delay: 0s; }
  &.p2 { top: 28%; left: 82%; animation-delay: 1.4s; }
  &.p3 { top: 65%; left: 12%; animation-delay: 2.8s; }
  &.p4 { top: 78%; left: 88%; animation-delay: 4.2s; }
  &.p5 { top: 42%; left: 55%; animation-delay: 2.1s; }
  &.p6 { top: 88%; left: 40%; animation-delay: 5.6s; }
}

/* ── HUD FRAME ── */
.hud-frame {
  position: fixed; inset: 12px; z-index: 0; pointer-events: none;
  .corner {
    position: absolute; width: 30px; height: 30px;
    &.tl { top: 0; left: 0; border-top: 2px solid $cyan-dim; border-left: 2px solid $cyan-dim; }
    &.tr { top: 0; right: 0; border-top: 2px solid $cyan-dim; border-right: 2px solid $cyan-dim; }
    &.bl { bottom: 0; left: 0; border-bottom: 2px solid $cyan-dim; border-left: 2px solid $cyan-dim; }
    &.br { bottom: 0; right: 0; border-bottom: 2px solid $cyan-dim; border-right: 2px solid $cyan-dim; }
  }
}

/* ── CARD ── */
.api-key-card {
  width: 100%; max-width: 600px;
  background: $panel-bg;
  border: 1px solid $cyan-dim;
  padding: 40px 36px;
  position: relative; z-index: 1;
  clip-path: polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 16px 100%, 0 calc(100% - 16px));
  box-shadow: 0 0 30px rgba(0,255,255,0.08), inset 0 0 60px rgba(0,255,255,0.02);
  animation: cardFadeIn 0.6s ease-out;
}

/* ── CARD RADAR ── */
.card-radar {
  width: 60px; height: 60px; margin: 0 auto 16px; position: relative;
  .radar-ring {
    position: absolute; inset: 0; border-radius: 50%; border: 1px solid $cyan-dim;
    &.r1 { inset: 6px; animation: radarPulse 2s ease-out infinite; }
    &.r2 { inset: 14px; animation: radarPulse 2s ease-out 0.6s infinite; }
  }
  .radar-sweep {
    position: absolute; inset: 0; border-radius: 50%;
    background: conic-gradient(from 0deg, transparent 0%, $cyan-glow 20%, transparent 25%);
    animation: radarSweep 3s linear infinite;
  }
  .radar-center {
    position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
    span { font-size: 18px; filter: drop-shadow(0 0 4px $cyan); }
  }
}

/* ── HEADER ── */
.header {
  text-align: center; margin-bottom: 32px;

  h1 {
    font-size: 22px; font-weight: 700;
    color: $cyan; letter-spacing: 4px; margin: 0;
    text-shadow: 0 0 10px $cyan-glow;
  }
  .title-line {
    height: 1px; margin: 10px auto; width: 50%;
    background: linear-gradient(90deg, transparent, $cyan-dim, transparent);
  }
  .subtitle {
    font-size: 10px; color: $cyan-dim; letter-spacing: 3px; margin: 0;
  }
}

/* ── EXISTING KEY ── */
.existing-key {
  background: rgba(0,255,255,0.03);
  border: 1px solid rgba(0,255,255,0.1);
  padding: 20px; margin-bottom: 28px;
  clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));

  .section-label {
    display: flex; align-items: center; gap: 8px;
    font-size: 11px; color: $cyan; letter-spacing: 2px; margin-bottom: 14px;
    .label-icon { font-size: 12px; }
    .status-badge {
      margin-left: auto; padding: 2px 10px;
      background: rgba(0,255,128,0.08); border: 1px solid rgba(0,255,128,0.3);
      color: rgba(0,255,128,0.7); font-size: 9px; letter-spacing: 2px;
    }
  }

  .key-info {
    margin-bottom: 16px;
    .key-display {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 14px; background: rgba(0,0,0,0.4);
      border: 1px solid rgba(0,255,255,0.06);
      .key-prefix { color: $cyan-dim; font-size: 10px; letter-spacing: 2px; }
      .masked-key { color: #e0f7ff; font-size: 14px; letter-spacing: 1px; }
    }
  }

  .btn-danger {
    padding: 10px 20px; background: transparent;
    border: 1px solid rgba(255,51,102,0.3); color: #ff3366;
    font-size: 11px; font-weight: 600; letter-spacing: 2px;
    cursor: pointer; transition: all 0.3s ease;
    font-family: 'Courier New', monospace;
    display: flex; align-items: center; gap: 6px;
    clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));

    .btn-x { font-size: 12px; }

    &:hover {
      background: rgba(255,51,102,0.08);
      border-color: #ff3366;
      box-shadow: 0 0 12px rgba(255,51,102,0.15);
    }
  }
}

/* ── FORM ── */
.api-key-form {
  .form-group {
    margin-bottom: 24px;

    label {
      display: flex; align-items: center; gap: 6px;
      font-size: 11px; color: $cyan; letter-spacing: 2px; margin-bottom: 8px;
      .label-icon { font-size: 10px; opacity: 0.7; }
    }

    .form-control {
      width: 100%; padding: 12px 14px;
      background: rgba(0,0,0,0.5);
      border: 1px solid rgba(0,255,255,0.15);
      color: #e0f7ff; font-size: 14px;
      font-family: 'Courier New', monospace;
      transition: all 0.3s ease;
      box-sizing: border-box;

      &:focus {
        outline: none; border-color: $cyan;
        box-shadow: 0 0 12px rgba(0,255,255,0.1);
        background: rgba(0,10,20,0.7);
      }
      &::placeholder { color: rgba(0,255,255,0.25); }
      &.input-error { border-color: #ff3366; }
    }

    .error-message {
      margin-top: 6px; font-size: 11px; color: #ff3366; letter-spacing: 1px;
      span { display: block; }
    }

    .help-text {
      margin-top: 10px; font-size: 11px; color: rgba(255,255,255,0.35); letter-spacing: 1px;
      a {
        color: $cyan; text-decoration: none; transition: all 0.3s ease;
        &:hover { text-shadow: 0 0 8px $cyan-glow; }
      }
    }
  }

  .success-message {
    margin-bottom: 20px; padding: 12px 16px;
    background: rgba(0,255,128,0.05);
    border: 1px solid rgba(0,255,128,0.2);
    color: rgba(0,255,128,0.8);
    font-size: 12px; letter-spacing: 1px;
    display: flex; align-items: center; gap: 8px;
    .success-icon { font-size: 14px; }
  }

  .error-banner {
    margin-bottom: 20px; padding: 12px 16px;
    background: rgba(255,51,102,0.06);
    border: 1px solid rgba(255,51,102,0.2);
    color: #ff3366; font-size: 12px; letter-spacing: 1px;
  }
}

/* ── INPUT FRAME ── */
.input-frame {
  position: relative; padding: 2px;
  .input-corner {
    position: absolute; width: 8px; height: 8px;
    &.itl { top: 0; left: 0; border-top: 1px solid $cyan; border-left: 1px solid $cyan; }
    &.itr { top: 0; right: 0; border-top: 1px solid $cyan; border-right: 1px solid $cyan; }
    &.ibl { bottom: 0; left: 0; border-bottom: 1px solid $cyan; border-left: 1px solid $cyan; }
    &.ibr { bottom: 0; right: 0; border-bottom: 1px solid $cyan; border-right: 1px solid $cyan; }
  }
  &:focus-within .input-corner {
    width: 12px; height: 12px; filter: drop-shadow(0 0 2px $cyan);
  }
}

/* ── BUTTONS ── */
.button-group {
  display: flex; gap: 12px; margin-top: 24px;

  button {
    flex: 1; padding: 14px; border: none;
    font-size: 12px; font-weight: 600; letter-spacing: 2px;
    cursor: pointer; transition: all 0.3s ease;
    font-family: 'Courier New', monospace;

    &:disabled { opacity: 0.4; cursor: not-allowed; }
  }

  .btn-primary {
    background: transparent; border: 1px solid $cyan; color: $cyan;
    clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));

    &:hover:not(:disabled) {
      background: $cyan-glow;
      box-shadow: 0 0 20px rgba(0,255,255,0.15);
      text-shadow: 0 0 6px $cyan;
    }

    .btn-content { display: flex; align-items: center; justify-content: center; gap: 6px; }
    .btn-icon { font-size: 14px; }
    .spinner-mini {
      width: 14px; height: 14px; border: 2px solid transparent;
      border-top-color: $cyan; border-radius: 50%;
      animation: spin 0.8s linear infinite; display: inline-block;
    }
  }

  .btn-secondary {
    background: transparent; border: 1px solid rgba(255,255,255,0.15); color: rgba(255,255,255,0.5);
    clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));

    &:hover:not(:disabled) { border-color: rgba(255,255,255,0.3); color: rgba(255,255,255,0.8); }
  }
}

/* ── FOOTER DATA ── */
.card-footer-data {
  display: flex; justify-content: center; gap: 8px; flex-wrap: wrap;
  margin-top: 28px; padding-top: 16px;
  border-top: 1px solid rgba(0,255,255,0.06);
  font-size: 9px; color: rgba(0,255,255,0.3); letter-spacing: 2px;
  .blink { animation: blink 1.2s step-end infinite; color: rgba(0,255,128,0.5); }
}

/* ── ANIMATIONS ── */
@keyframes gridShift { 0% { background-position: 0 0; } 100% { background-position: 60px 60px; } }
@keyframes scanDown { 0% { top: -2px; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
@keyframes particleFloat {
  0%, 100% { opacity: 0; transform: translateY(0) scale(0.5); }
  50% { opacity: 0.6; transform: translateY(-30px) scale(1); }
}
@keyframes radarSweep { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes radarPulse { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(1.3); opacity: 0; } }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes cardFadeIn { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

/* ── RESPONSIVE ── */
@media (max-width: 520px) {
  .api-key-card { padding: 28px 18px; }
  .header h1 { font-size: 16px; letter-spacing: 2px; }
  .button-group { flex-direction: column; }
}
