<div class="agent-sessions-container">
  <div class="agent-header">
    <div class="header-content">
      <button class="btn-back" routerLink="/dashboard">‚Üê BACK</button>
      <div class="agent-info" *ngIf="agent">
        <h1>{{ agent.name }}</h1>
        <span class="model">{{ agent.model }}</span>
      </div>
      <button class="btn-delete" (click)="deleteAgent()" *ngIf="agent">DELETE</button>
    </div>
  </div>

  <div class="sessions-content">
    <div class="sessions-header">
      <h2>Conversations</h2>
      <button class="btn-new-session" (click)="createNewSession()">
        <span class="icon">+</span>
        NEW CONVERSATION
      </button>
    </div>

    <div class="error-banner" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="sessions-grid" *ngIf="!isLoading">
      <div class="empty-state" *ngIf="sessions.length === 0">
        <div class="empty-icon">üí¨</div>
        <p>No conversations yet</p>
        <span>Start a new conversation to get started</span>
      </div>

      <div 
        *ngFor="let session of sessions"
        class="session-card"
        (click)="openSession(session)"
      >
        <div class="session-emoji">{{ session.emoji || 'üí¨' }}</div>
        <div class="session-info">
          <h3>{{ session.title || 'New Conversation' }}</h3>
          <p *ngIf="session.description">{{ session.description }}</p>
          <p *ngIf="!session.description" class="no-description">No description yet</p>
          <div class="session-meta">
            <span class="date" *ngIf="session.lastMessageAt">
              {{ session.lastMessageAt | date: 'short' }}
            </span>
            <span class="date" *ngIf="!session.lastMessageAt">
              {{ session.createdAt | date: 'short' }}
            </span>
          </div>
        </div>
        <button class="btn-delete-session" (click)="deleteSession(session, $event)" title="Delete session">
          √ó
        </button>
      </div>
    </div>

    <div class="loading-state" *ngIf="isLoading">
      <div class="spinner"></div>
      <span>Loading conversations...</span>
    </div>
  </div>
</div>
